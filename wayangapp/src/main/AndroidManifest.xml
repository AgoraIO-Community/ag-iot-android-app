<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    package="io.agora.wayangdemo">


    <!-- 从扩展存储读取权限，添加设备时访问系统图库需要 -->
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />

    <!-- 允许应用程序改变任务的z顺序，来电时将APP从后台拉到前台显示 -->
    <uses-permission android:name="android.permission.REORDER_TASKS" />

    <!-- 悬浮窗系统权限，用于支持来电时将APP从后台拉到前台显示 -->
    <uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW" />


    <!-- ==================== 添加设备配网权限 BEGIN ==================== -->
        <!-- 允许应用程序获取wifi状态，Android 10以上要求权限 -->
        <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
        <!-- 允许程序改变网络连接状态 -->
        <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
        <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
        <uses-permission android:name="android.permission.CHANGE_WIFI_STATE"/>
        <uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" />
    <!-- ==================== 添加设备配网权限 END ==================== -->


    <!-- ==================== 离线推送权限 BEGIN ==================== -->
        <!-- Mi推送权限配置 start -->
        <permission
            android:name="${applicationId}.permission.MIPUSH_RECEIVE"
            android:protectionLevel="signature" />
        <uses-permission android:name="${applicationId}.permission.MIPUSH_RECEIVE" />
        <uses-permission android:name="android.permission.GET_TASKS"/>
        <!-- Mi推送权限配置 end -->

        <!-- HUAWEI 推送权限配置 start -->
        <uses-permission android:name="android.permission.WAKE_LOCK" />
        <!-- HUAWEI 推送权限配置 end -->

        <!-- OPPO推送权限配置 start -->
        <uses-permission android:name="com.coloros.mcs.permission.RECIEVE_MCS_MESSAGE"/>
        <uses-permission android:name="com.heytap.mcs.permission.RECIEVE_MCS_MESSAGE"/>
        <!-- OPPO推送权限配置 end -->
    <!-- ==================== 离线推送权限 END ==================== -->


    <application
        android:name=".base.AgoraApplication"
        android:allowBackup="false"
        android:icon="@mipmap/ic_launcher"
        android:label="SDK_2.0 Wayang"
        android:networkSecurityConfig="@xml/security_config"
        android:requestLegacyExternalStorage="true"
        android:supportsRtl="true"
        android:theme="@style/Theme.AgoraLink"
        tools:replace="android:allowBackup">
        <meta-data
            android:name="design_width_in_dp"
            android:value="375" />
        <meta-data
            android:name="design_height_in_dp"
            android:value="812" />

        <activity
            android:name=".models.welcome.WelcomeActivity"
            android:label="灵隼2.0 Wayang"
            android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name=".models.home.MainActivity"
            android:configChanges="orientation|screenSize|keyboardHidden"
            android:launchMode="standard"
            android:screenOrientation="portrait" />

        <activity
            android:name=".models.config.ConfigActivity"
            android:configChanges="orientation|screenSize|keyboardHidden"
            android:launchMode="standard"
            android:screenOrientation="portrait" />


        <provider
            android:name="androidx.core.content.FileProvider"
            android:authorities="${applicationId}.fileProvider"
            android:exported="false"
            android:grantUriPermissions="true">
            <meta-data
                android:name="android.support.FILE_PROVIDER_PATHS"
                android:resource="@xml/provider_paths" />
        </provider>

        <!-- 设置声网应用的AppID -->
        <meta-data
            android:name="AGORA_APPID"
            android:value="@string/AGORA_APPID" />

        <!-- 设置声网应用的ProjectID -->
        <meta-data
            android:name="PROJECT_ID"
            android:value="@string/PROJECT_ID" />

        <!-- 设置灵隼服务Master Server -->
        <meta-data
            android:name="MASTER_SERVER_URL"
            android:value="@string/MASTER_SERVER_URL" />

        <!-- 设置灵隼服务Slave Server -->
        <meta-data
            android:name="SALVE_SERVER_URL"
            android:value="@string/SALVE_SERVER_URL" />

        <!-- 设置配第三方账号服务器地址 Account Server -->
        <meta-data
            android:name="ACCOUNT_SERVER_URL"
            android:value="@string/ACCOUNT_SERVER_URL" />

        <!-- ==================== 离线推送账号配置 BEGIN ==================== -->
            <!-- 环信账号配置 -->
            <meta-data
                android:name="EASEMOB_APPKEY"
                android:value="@string/EASEMOB_APPKEY" />

            <!-- Mi账号配置 -->
            <meta-data
                android:name="com.mi.push.api_key"
                android:value="@string/MI_PUSH_APPKEY" />
            <meta-data
                android:name="com.mi.push.app_id"
                android:value="@string/MI_PUSH_APPID" />

            <!--华为账号配置 -->
            <meta-data
                android:name="com.huawei.hms.client.appid"
                android:value="@string/HUAWEI_PUSH_APPKID" />
            <meta-data
                android:name="push_kit_auto_init_enabled"
                android:value="true"/>

            <!-- Oppo账号配置 -->
            <meta-data
                android:name="com.oppo.push.api_key"
                android:value="@string/OPPO_PUSH_APPKEY" />
            <meta-data
                android:name="com.oppo.push.app_secret"
                android:value="@string/OPPO_PUSH_APPSECRET" />

            <!-- VIVO账号配置 -->
            <meta-data
                android:name="com.vivo.push.api_key"
                android:value="@string/VIVO_PUSH_APPKEY" />
            <meta-data
                android:name="com.vivo.push.app_id"
                android:value="@integer/VIVO_PUSH_APPID" />
        <!-- ==================== 离线推送账号配置 END ==================== -->



        <!-- ==================== 离线推送服务 BEGIN ==================== -->
            <!-- Mi推送服务配置 start -->
            <service
                android:name="com.xiaomi.push.service.XMPushService"
                android:enabled="true"
                android:process=":pushservice" />
            <service
                android:name="com.xiaomi.push.service.XMJobService"
                android:enabled="true"
                android:exported="false"
                android:permission="android.permission.BIND_JOB_SERVICE"
                android:process=":pushservice" /> <!--注：此service必须在3.0.1版本以后（包括3.0.1版本）加入-->
            <service
                android:name="com.xiaomi.mipush.sdk.PushMessageHandler"
                android:enabled="true"
                android:exported="true" />
            <service
                android:name="com.xiaomi.mipush.sdk.MessageHandleService"
                android:enabled="true" /> <!--注：此service必须在2.2.5版本以后（包括2.2.5版本）加入-->
            <receiver
                android:name="com.xiaomi.push.service.receivers.NetworkStatusReceiver"
                android:exported="true">
                <intent-filter>
                    <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
                    <category android:name="android.intent.category.DEFAULT" />
                </intent-filter>
            </receiver>
            <receiver
                android:name="com.xiaomi.push.service.receivers.PingReceiver"
                android:exported="false"
                android:process=":pushservice">

                <intent-filter>
                    <action android:name="com.xiaomi.push.PING_TIMER" />
                </intent-filter>
            </receiver>
            <receiver android:name="com.hyphenate.push.platform.mi.EMMiMsgReceiver">
                <intent-filter>
                    <action android:name="com.xiaomi.mipush.RECEIVE_MESSAGE" />
                </intent-filter>
                <intent-filter>
                    <action android:name="com.xiaomi.mipush.MESSAGE_ARRIVED" />
                </intent-filter>
                <intent-filter>
                    <action android:name="com.xiaomi.mipush.ERROR" />
                </intent-filter>
            </receiver>
            <!-- Mi推送服务配置 end-->

            <!-- HuaWei 推送服务配置 start -->
            <service android:name="io.agora.wayangdemo.huanxin.HMSPushService"
                android:exported="false">
                <intent-filter>
                    <action android:name="com.huawei.push.action.MESSAGING_EVENT" />
                </intent-filter>
            </service>
            <!-- HuaWei 推送服务配置 end -->

            <!-- Oppo推送服务配置 start -->
            <service
                android:name="com.heytap.msp.push.service.CompatibleDataMessageCallbackService"
                android:permission="com.coloros.mcs.permission.SEND_MCS_MESSAGE"
                android:exported="false" >
                <intent-filter>
                    <action android:name="com.coloros.mcs.action.RECEIVE_MCS_MESSAGE"/>
                </intent-filter>
            </service> <!--兼容Q以下版本-->
            <service
                android:name="com.heytap.msp.push.service.DataMessageCallbackService"
                android:permission="com.heytap.mcs.permission.SEND_PUSH_MESSAGE"
                android:exported="false">
                <intent-filter>
                    <action android:name="com.heytap.mcs.action.RECEIVE_MCS_MESSAGE"/>
                    <action android:name="com.heytap.msp.push.RECEIVE_MCS_MESSAGE"/>
                </intent-filter>
            </service> <!--兼容Q版本-->
            <!-- Oppo推送服务配置 end -->

            <!-- VIVO推送服务配置 start -->
            <service
                android:name="com.vivo.push.sdk.service.CommandClientService"
                android:exported="true" />
            <activity
                android:name="com.vivo.push.sdk.LinkProxyClientActivity"
                android:exported="false"
                android:screenOrientation="portrait"
                android:theme="@android:style/Theme.Translucent.NoTitleBar" />
            <receiver
                android:name="com.hyphenate.push.platform.vivo.EMVivoMsgReceiver"
                android:exported="false" >
                <intent-filter>
                    <!-- 接收 push 消息 -->
                    <action android:name="com.vivo.pushclient.action.RECEIVE" />
                </intent-filter>
            </receiver>
            <!-- VIVO推送服务配置 end -->
        <!-- ==================== 离线推送服务 END ==================== -->

    </application>



    <!-- targetSdkVersion是30或者更高版本时，需要添加<queries>标签，使应用可以访问HMS Core（APK） -->
        <queries>
            <intent>
                <action android:name="com.huawei.hms.core.aidlservice" />
            </intent>
        </queries>
    <!-- HMS Core（APK）访问配置 end-->

</manifest>